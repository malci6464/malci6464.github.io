(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(t,e,n){},105:function(t,e){},106:function(t,e){},107:function(t,e){},122:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"usa",function(){return f}),n.d(o,"boston",function(){return g}),n.d(o,"coolidge",function(){return b}),n.d(o,"ma",function(){return p}),n.d(o,"nyc",function(){return h});var i=n(8),a=n.n(i),r=n(55),c=n.n(r),u=(n(101),n(73)),s=n(36),l=n(63),d=n.n(l),f={longitude:-98.12078906038815,latitude:39.07050154936433,zoom:3.847,pitch:41.8,bearing:.7},g={longitude:-71.091908,latitude:42.362419,zoom:12,pitch:47.5,bearing:-1.45},b={longitude:-71.121316,latitude:42.342492,zoom:12,pitch:0,bearing:0},p={longitude:-71.84284514317822,latitude:42.16213680615227,zoom:7.5,pitch:0,bearing:0},h={longitude:-73.9544312807859,latitude:40.737897096399855,zoom:11,pitch:42.9,bearing:58.7},v=n(45),m=n(42),j=n(71);var w=n(41),O=n(68),C=n(69),S=n(70),y=n(72),E=n(35),k=n(58),M=n(74),x=function(t){function e(){return Object(C.a)(this,e),Object(y.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(M.a)(e,t),Object(S.a)(e,[{key:"getShaders",value:function(){return Object.assign({},Object(k.a)(Object(E.a)(e.prototype),"getShaders",this).call(this),{inject:{"vs:#decl":"\n         uniform float coef;\n        ","vs:#main-end":"\n        if (coef > 0.0) {\n          vec4 pct = vec4(segmentRatio);\n          pct.a = step(coef, segmentRatio);\n          vec4 colorA = instanceSourceColors;\n          vec4 colorB = vec4(instanceTargetColors.r, instanceTargetColors.g, instanceTargetColors.b, 0.0);\n          vec4 color = mix(colorA, colorB, pct) / 255.;\n          vColor = color;\n        }\n                    ","fs:#main-start":"\n        if (vColor.a == 0.0) discard;\n                    "}})}},{key:"draw",value:function(t){var n=this.props.coef,o=Object.assign({},t.uniforms,{coef:n});Object(k.a)(Object(E.a)(e.prototype),"draw",this).call(this,Object.assign({},t,{uniforms:o}))}}]),e}(m.a);x.componentName="ArcBrushingLayer";var A=x;function z(t){var e=t.width,n=t.height,o=t.viewState,i=t.onViewStateChange,r=t.libraries,c=t.radius,u=t.arcsEnabled,s=(a.a.useMemo(function(){return r.filter(function(t){return"MA"===t.state})},[r]),a.a.useMemo(function(){return r.length?Object(O.lineString)(r.map(function(t){return t.position})):void 0},[r])),l=a.a.useMemo(function(){return Object(w.c)(Object(w.d)(r.slice()).slice(0,100))},[r]);return a.a.createElement(v.c,{width:e,height:n,viewState:o,onViewStateChange:i},a.a.createElement(j.Spring,{to:{arcCoef:u?1:1e-10}},function(t){var e=[new m.d({id:"scatterplot-layer",data:r,getRadius:500*c,radiusMaxPixels:15,getFillColor:[255,99,71],transitions:{getRadius:{duration:1e3,easing:w.b}},pickable:!0,onClick:function(t){return console.log(t.object)},autoHighlight:!0}),new m.c({id:"geojson-layer",data:s,lineWidthMinPixels:1,getLineColor:[0,0,0,20]}),new A({id:"arc-layer",data:l,getSourcePosition:function(t){return t[0].position},getTargetPosition:function(t){return t[1].position},getSourceColor:[0,255,0],getTargetColor:[0,200,200],getWidth:3,visible:t.arcCoef>1e-6,coef:t.arcCoef})];return a.a.createElement(m.b,{layers:e,viewState:o})}))}var R=function(){var t=a.a.useState(f),e=Object(s.a)(t,2),n=e[0],i=e[1],r=a.a.useState([]),c=Object(s.a)(r,2),l=c[0],g=c[1];a.a.useEffect(function(){Object(w.a)("/data/public_libraries.csv",function(t,e){return{id:e,state:t.State,position:[+t.Longitude,+t.Latitude]}}).then(function(t){return t.filter(function(t){return null!=t.position[0]&&null!=t.position[1]})}).then(g)},[]);var b=a.a.useState(15),p=Object(s.a)(b,2),h=p[0],m=p[1],j=a.a.useState(!0),O=Object(s.a)(j,2),C=O[0],S=O[1];return a.a.createElement("div",null,a.a.createElement(z,{width:"100vw",height:"100vh",viewState:n,onViewStateChange:function(t){var e=t.viewState;return i(e)},libraries:l,radius:h,arcsEnabled:C}),a.a.createElement("div",{className:d.a.controls},a.a.createElement("button",{onClick:function(){return m(h>0?0:35*Math.random()+5)}},"Radius"),a.a.createElement("button",{onClick:function(){return S(!C)}},"Arcs"),Object.keys(o).map(function(t){return a.a.createElement("button",{key:t,onClick:function(){return e=o[t],i(Object(u.a)({},n,e,{transitionDuration:2e3,transitionInterpolator:new v.a}));var e}},t)})))};c.a.render(a.a.createElement(R,null),document.getElementById("root"))},63:function(t,e,n){t.exports={controls:"App_controls__14oJX"}},96:function(t,e,n){t.exports=n(122)}},[[96,1,2]]]);
//# sourceMappingURL=main.ec5776e9.chunk.js.map